{% extends 'layout.html' %}

{% load crispy_forms_tags %}

{% block content %}
<div class="item-entry">
	<div class="card">
		<div class="card-header">
			{% if item.main_image %}
			<img class="cojack-image" src="{{ object.main_image.url }}" alt="{{ object.name }}">
			{% endif %}
		</div>
		<div class="card-body">
			<h2>{{ object.name }}</h2>
			{% if user.is_authenticated and user.is_staff %}
			<p>by {{ object.publisher }} | {{ object.created_at }}</p>
			{% endif %}
			<h6>{{ object.description }}</h6>
			<p>${{ object.current_price }}</p>
			<div class="d-flex justify-content-between align-items-center">
				<div class="btn-group">
					<a href="#"><button type="button" class="btn btn-sm btn-outline-secondary">Add to Cart</button></a>
					{% if user.is_authenticated and user.is_staff %}
					<a href="{% url 'item_edit' item.pk %}"><button type="button" class="btn btn-sm btn-success">Edit</button></a>
					<a href="{% url 'item_delete' item.pk %}"><button type="button" class="btn btn-sm btn-danger">Delete</button></a>
					{% endif %}
				</div>
			</div>
			{% comment %}
			{% if user.is_authenticated and user.is_staff %}
			<p><a href="{% url 'item_edit' item.pk %}">Edit</a> | <a href="{% url 'item_delete' item.pk %}">Delete</a></p>
			{% endif %}
			{% endcomment %}
			<p>Back to <a href="{% url 'item_list' %}">All Items</a>.</p>
		</div>
		<div class="card-footer">
			{% for comment in item.comments.all %}
			<h6>Comment By <span class="font-weight-bold">{{ comment.publisher }}</span></h6>
			<p>{{ comment }}</p>
			{% endfor %}
			<div>
				{% csrf_token %}
				{{ form|crispy }}
				{% comment %}<a href="{% url 'comment_new' %}">Add Comment</a>{% endcomment %}
			</div>
		</div>
	</div>
</div>
{% endblock content %}
